# CPUID - CPU (feature) Identification

- Different processors support different features
- CPUID is how we know if the chip we're running on supports newer features, such as hardware virtualization, 64 bit mode, HyperThreading, thermal monitors etc.
- CPUID doesn't have operands. Rather it "takes input" as value preloaded into eax (and possibly ecx). After it finished the outputs are stored to eax, ebxm ecx and edx.


## How to know if we can use CPUID?

- If the program is able to set or clear the ID Flag in EFLAGS (bit 21) then it indicates that this program supports CPUID
- To read/write EFLAGS, we need the PUSHFD/POPFD instructions


## PUSHDF - Push EFLAGS onto Stack

- Opcode - 0x9c
- PUSHF - Push lower 16 bite of EFLAGS
- PUSHFD - Push EFLAGS
- PUSHFQ - Push RFLAGS

- Although the opcodes are same for all, Visual Studio will force a prefix on this opcode which forces it to be the 16 bit version
- Therefore we get the 16 bit instead of the 32 bit version


**Refer to : [Examples of CPUID Usage](https://nixhacker.com/getting-processor-info-using-cpuid/)**

**Refer to : [CPUID Wikipedia](https://nixhacker.com/getting-processor-info-using-cpuid/;)**

